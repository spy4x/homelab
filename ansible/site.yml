---
# Main Site Playbook
# This is the master playbook that can run all setup tasks

- name: Complete Homelab Setup
  hosts: homelab_servers

  tasks:
    - name: Welcome message
      ansible.builtin.debug:
        msg:
          - "üè† Starting Homelab Setup"
          - "Target: {{ inventory_hostname }}"
          - "User: {{ homelab_user }}"

# Import all playbooks in order
- import_playbook: playbooks/initial-setup.yml
- import_playbook: playbooks/ssh-hardening.yml
- import_playbook: playbooks/fail2ban.yml
- import_playbook: playbooks/smart-monitoring.yml
- import_playbook: playbooks/maintenance.yml
- import_playbook: playbooks/backup-cronjob.yml
- import_playbook: playbooks/monitoring.yml

- name: Setup Complete
  hosts: homelab_servers
  tasks:
    - name: Final summary
      ansible.builtin.debug:
        msg:
          - "‚úÖ Complete homelab setup finished!"
          - ""
          - "Your server is now configured with:"
          - "  ‚úì Docker and Docker Compose"
          - "  ‚úì Deno runtime"
          - "  ‚úì SSH hardening (key-only auth)"
          - "  ‚úì Fail2ban (SSH + Docker logs)"
          - "  ‚úì SMART monitoring (SSD/NVMe health)"
          - "  ‚úì Automated backups via cron"
          - "  ‚úì System maintenance (updates, cleanup, log rotation)"
          - "  ‚úì Container health monitoring"
          - "  ‚úì Disk space & service availability alerts"
          - ""
          - "üéâ Ready to deploy your services!"
          - ""
          - "Next: ansible-playbook playbooks/deploy.yml"
