---
# Main Site Playbook
# This is the master playbook that orchestrates the complete homelab setup
# It runs initial setup first, then service deployment, followed by post-deployment configuration

- name: Complete Homelab Setup
  hosts: homelab_servers

  tasks:
    - name: Welcome message
      ansible.builtin.debug:
        msg:
          - "ğŸ  Starting Complete Homelab Setup"
          - "Target: {{ inventory_hostname }}"
          - "User: {{ homelab_user }}"
          - ""
          - "This will:"
          - "  1. Configure server (initial-setup.yml)"
          - "  2. Deploy services (deploy.yml)"
          - "  3. Configure post-deployment (after-deploy.yml)"

# Import all playbooks in order
- import_playbook: playbooks/initial-setup.yml
# Note: Uncomment the next line when deploy.yml is available
# - import_playbook: playbooks/deploy.yml
- import_playbook: playbooks/after-deploy.yml

- name: Complete Setup Finished
  hosts: homelab_servers
  tasks:
    - name: Final summary
      ansible.builtin.debug:
        msg:
          - "âœ… Complete homelab setup finished!"
          - ""
          - "Your homelab is now fully configured with:"
          - "  âœ“ Docker and Docker Compose"
          - "  âœ“ Deno runtime"
          - "  âœ“ SSH hardening (key-only auth)"
          - "  âœ“ SMART monitoring (SSD/NVMe health)"
          - "  âœ“ System maintenance automation"
          - "  âœ“ Fail2ban protection"
          - "  âœ“ Container health monitoring"
          - "  âœ“ Automated backups"
          - ""
          - "ğŸ‰ Your homelab is ready!"
          - ""
          - "Services deployed and secured with monitoring and backups."
