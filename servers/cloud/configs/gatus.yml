# Gatus Configuration for Cloud Server
# Monitors home and offsite services (cross-check monitoring)

storage:
  type: sqlite
  path: /data/data.db

web:
  port: 8080

alerting:
  ntfy:
    topic: ${NTFY_URL}
    token: ${NTFY_TOKEN}
    priority: 3
    default-alert:
      enabled: true
      failure-threshold: 3
      success-threshold: 2

endpoints:
  # Home Server Services (cross-check)
  - name: Home - Homepage
    url: "https://ui.${DOMAIN}"
    interval: 5m
    conditions:
      - "[STATUS] == 200"
    alerts:
      - type: ntfy

  - name: Home - Vaultwarden
    url: "https://passwords.${DOMAIN}"
    interval: 5m
    conditions:
      - "[STATUS] == 200"
    alerts:
      - type: ntfy

  - name: Home - Jellyfin
    url: "https://movies.${DOMAIN}"
    interval: 5m
    conditions:
      - "[STATUS] == 200"
    alerts:
      - type: ntfy

  - name: Home - Immich
    url: "https://photos.${DOMAIN}"
    interval: 5m
    conditions:
      - "[STATUS] == 200"
    alerts:
      - type: ntfy

  - name: Home - Home Assistant
    url: "https://home.${DOMAIN}"
    interval: 5m
    conditions:
      - "[STATUS] == 200"
    alerts:
      - type: ntfy

  - name: Home - AdGuard Home
    url: "https://dns.${DOMAIN}"
    interval: 5m
    conditions:
      - "[STATUS] == 200"
    alerts:
      - type: ntfy

  - name: Home - ntfy
    url: "https://ntfy-home.${DOMAIN}"
    interval: 5m
    conditions:
      - "[STATUS] == 200"
    alerts:
      - type: ntfy

  - name: Home - Gatus
    url: "https://uptime-home.${DOMAIN}"
    interval: 10m
    conditions:
      - "[STATUS] == 200"
    alerts:
      - type: ntfy

  - name: Home - Proxy
    url: "https://proxy-home.${DOMAIN}"
    interval: 10m
    client:
      username: ${BASIC_AUTH_USER}
      password: ${BASIC_AUTH_PASSWORD}
    conditions:
      - "[STATUS] == 200"
    alerts:
      - type: ntfy

  # Offsite Server Services (cross-check)
  - name: Offsite - Proxy
    url: "https://proxy-offsite.${DOMAIN}"
    interval: 10m
    client:
      username: ${BASIC_AUTH_USER}
      password: ${BASIC_AUTH_PASSWORD}
    conditions:
      - "[STATUS] == 200"
    alerts:
      - type: ntfy

  - name: Offsite - Syncthing
    url: "https://sync-offsite.${DOMAIN}"
    interval: 10m
    conditions:
      - "[STATUS] == 200"
    alerts:
      - type: ntfy
