# Gatus Configuration for Home Server
# Monitors cloud and offsite services (cross-check monitoring)

storage:
  type: sqlite
  path: /data/data.db

web:
  port: 8080

alerting:
  ntfy:
    topic: ${NTFY_URL}
    token: ${NTFY_TOKEN}
    priority: 3
    default-alert:
      enabled: true
      failure-threshold: 3
      success-threshold: 2

endpoints:
  # Cloud Server Services (cross-check)
  - name: Cloud - Mail Server (SMTP)
    url: "tcp://mail.${DOMAIN}:587"
    interval: 5m
    conditions:
      - "[CONNECTED] == true"
    alerts:
      - type: ntfy

  - name: Cloud - Webmail
    url: "https://webmail.${DOMAIN}"
    interval: 5m
    conditions:
      - "[STATUS] == 200"
    alerts:
      - type: ntfy

  - name: Cloud - Rspamd
    url: "https://rspamd.${DOMAIN}"
    interval: 5m
    client:
      username: ${RSPAMD_USERNAME}
      password: ${RSPAMD_PASSWORD}
    conditions:
      - "[STATUS] == 200"
    alerts:
      - type: ntfy

  - name: Cloud - ntfy
    url: "https://ntfy-cloud.${DOMAIN}"
    interval: 5m
    conditions:
      - "[STATUS] == 200"
    alerts:
      - type: ntfy

  - name: Cloud - Gatus
    url: "https://uptime.${DOMAIN}"
    interval: 10m
    conditions:
      - "[STATUS] == 200"
    alerts:
      - type: ntfy

  # Offsite Server Services (cross-check)
  - name: Offsite - Proxy
    url: "https://proxy-offsite.${DOMAIN}"
    interval: 10m
    client:
      username: ${BASIC_AUTH_USER}
      password: ${BASIC_AUTH_PASSWORD}
    conditions:
      - "[STATUS] == 200"
    alerts:
      - type: ntfy

  - name: Offsite - Syncthing
    url: "https://sync-offsite.${DOMAIN}"
    interval: 10m
    conditions:
      - "[STATUS] == 200"
    alerts:
      - type: ntfy
