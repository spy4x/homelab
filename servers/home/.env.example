# Home Server Environment Configuration
# Copy this file to .env and fill in your actual values

SERVER_NAME=home
# SSH username for Ansible and deployment
HOMELAB_USER=spy4x
# SSH connection details for deployment
SSH_ADDRESS=your-server-hostname-or-ip
SSH_PORT=22
# SSH_PRIVATE_KEY_FILE=~/.ssh/id_rsa  # Optional: Path to SSH private key (uses SSH agent by default)
TIMEZONE=America/New_York
DOMAIN=yourdomain.com

#region Ansible
# Firewall ports to open (comma-separated list)
# Format: port/protocol (e.g., 80/tcp,443/tcp)
FIREWALL_PORTS=80/tcp,443/tcp,${SSH_PORT}/tcp,51413/tcp,51413/udp,53/tcp,53/udp,853/tcp,51820/udp,22000/tcp,22000/udp,21027/udp
# 80/tcp, 443/tcp - Traefik (HTTP/HTTPS)
# ${SSH_PORT}/tcp - SSH custom port
# 51413/tcp, 51413/udp - Transmission (BitTorrent)
# 53/tcp, 53/udp - AdGuard (DNS)
# 853/tcp - AdGuard (DNS-over-TLS)
# 51820/udp - WireGuard (VPN)
# 22000/tcp, 22000/udp, 21027/udp - Syncthing (sync protocol and discovery)

# Ntfy notification tokens and URLs for system monitoring
# Get tokens from your ntfy instance: Settings → Access Tokens
NTFY_TOKEN_HARDWARE=tk_YOUR_HARDWARE_TOKEN_HERE
NTFY_TOKEN_SECURITY=tk_YOUR_SECURITY_TOKEN_HERE
NTFY_TOKEN_UPTIME=tk_YOUR_UPTIME_TOKEN_HERE
NTFY_URL_HARDWARE=https://ntfy.yourdomain.com/hardware
NTFY_URL_SECURITY=https://ntfy.yourdomain.com/security
NTFY_URL_UPTIME=https://ntfy.yourdomain.com/uptime
#endregion Ansible

#region Docker
# Get with: getent group docker | cut -d: -f3
DOCKER_GROUP_ID=990
#endregion Docker

#region Paths
# Configure paths for your storage layout
# Adjust these based on your mounted drives
BASE_PATH=~/ssd-2tb
VOLUMES_PATH=${BASE_PATH}/apps/.volumes
PATH_APPS=${BASE_PATH}/apps                 # Docker services location
PATH_SYNC=${BASE_PATH}/sync                 # Syncthing shared folder
PATH_BACKUPS=${PATH_SYNC}/backups           # Backup storage
PATH_BOOKS=${BASE_PATH}/sync/archive/books  # AudioBookshelf library
PATH_MEDIA=${BASE_PATH}/media               # Main media directory
PATH_MOVIES=${BASE_PATH}/media/movies       # Jellyfin movies
PATH_SERIES=${BASE_PATH}/media/series       # Jellyfin TV shows
PATH_MUSIC=${BASE_PATH}/sync/archive/music  # Music library
PATH_OTHER=${BASE_PATH}/media/other         # Other media
PATH_PHOTOS=${BASE_PATH}/media/photos       # Immich photos
PATH_VIDEOS=${BASE_PATH}/media/videos       # Video files
#endregion Paths

#region Proxy
# Traefik reverse proxy configuration
PROXY_SUBDOMAIN=proxy-home
PROXY_CPU_LIMIT=2
PROXY_MEM_LIMIT=2048M
BASIC_AUTH_USER=admin
# Generate with: echo $(htpasswd -nB admin) | sed 's/\$/\$\$/g'
BASIC_AUTH_PASSWORD=$$2y$$05$$YOUR_HASHED_PASSWORD_HERE
#endregion Proxy

#region Backups
# Syncthing and backup notification configuration
SYNCTHING_SUBDOMAIN=sync-home
SYNCTHING_CPU_LIMIT=3
SYNCTHING_MEM_LIMIT=4096M
NTFY_URL_BACKUPS=https://ntfy-home.yourdomain.com/backups
NTFY_TOKEN_BACKUPS=tk_YOUR_BACKUP_TOKEN_HERE
# Optional: Healthchecks.io-style ping URL for backup monitoring
# Create a check in Healthchecks, then paste the ping URL here
# If backups don't ping within expected time, Healthchecks will alert you
HEALTHCHECKS_BACKUP_URL=https://healthchecks.yourdomain.com/ping/YOUR_CHECK_UUID
#endregion Backups

#region Monitoring
# Gatus health monitoring configuration
GATUS_CONFIG_PATH=${PATH_APPS}/configs/gatus.yml
GATUS_SUBDOMAIN=uptime-home
NTFY_TOPIC_UPTIME=uptime
NTFY_TOKEN_UPTIME=tk_YOUR_UPTIME_TOKEN_HERE
#endregion Monitoring

#region NTFY
# Ntfy notification service
NTFY_SUBDOMAIN=ntfy-home
NTFY_URL=https://ntfy-home.yourdomain.com
#endregion NTFY

#region VaultWarden
# Password manager configuration
# Generate admin token with: echo -n "your-admin-password" | argon2 "$(openssl rand -base64 32)" -e -id -k 65540 -t 3 -p 4
# IMPORTANT: Escape $ characters with $$ for Docker Compose (e.g., $$argon2id$$v=19...)
VAULTWARDEN_ADMIN_TOKEN='$$argon2id$$v=19$$m=65540,t=3,p=4$$YOUR_ARGON2_HASH_HERE'
VAULTWARDEN_SIGNUPS_ALLOWED=false
VAULTWARDEN_INVITATIONS_ALLOWED=false
VAULTWARDEN_SHOW_PASSWORD_HINT=false
VAULTWARDEN_LOGIN_RATELIMIT_MAX_BURST=10
VAULTWARDEN_LOGIN_RATELIMIT_SECONDS=60
VAULTWARDEN_INCOMPLETE_2FA_TIME_LIMIT=3
VAULTWARDEN_LOG_LEVEL=info
VAULTWARDEN_EMERGENCY_ACCESS_ALLOWED=true
#endregion VaultWarden

#region Woodpecker CI
# CI/CD configuration
# Generate secret with: openssl rand -hex 32
WOODPECKER_AGENT_SECRET=YOUR_64_CHAR_HEX_SECRET_HERE
WOODPECKER_ADMIN=your-github-username
# Get from GitHub OAuth App: Settings → Developer settings → OAuth Apps
WOODPECKER_GITHUB_CLIENT=YOUR_GITHUB_CLIENT_ID
WOODPECKER_GITHUB_SECRET=YOUR_GITHUB_CLIENT_SECRET
#endregion Woodpecker CI

#region Piped
# YouTube alternative database configuration
# Generate password with: head -c 32 /dev/urandom | base64 | head -c 32
PIPED_DB_NAME=piped
PIPED_DB_USER=piped
PIPED_DB_PASSWORD=YOUR_SECURE_DATABASE_PASSWORD_HERE
#endregion Piped

#region Immich
# Photo management configuration
# Generate password with: head -c 32 /dev/urandom | base64 | head -c 32
IMMICH_DB_PASSWORD=YOUR_IMMICH_DB_PASSWORD_HERE
# Generate API key with: openssl rand -base64 32
IMMICH_KIOSK_API_KEY=YOUR_IMMICH_API_KEY_HERE
IMMICH_KIOSK_PASSWORD=YOUR_KIOSK_PASSWORD_HERE
#endregion Immich

#region WireGuard VPN
VPN_SUBDOMAIN=vpn-home
# DNS server for VPN clients (optional, defaults to Cloudflare: 1.1.1.1,8.8.8.8,9.9.9.9)
# Use your AdGuard Home IP for ad-blocking on VPN: VPN_DNS=192.168.0.100
VPN_DNS=192.168.0.100
# Number of VPN peer configs to generate
VPN_PEERS=4
#endregion WireGuard VPN

#region Healthchecks
HEALTHCHECKS_SECRET_KEY=YOUR_SECRET
HEALTHCHECKS_BACKUP_URL=https://healthchecks.antonshubin.com/ping/UUID
#endregion Healthchecks

